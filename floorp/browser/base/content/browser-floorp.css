/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. */

     /* Source file https://github.com/MrOtherGuy/firefox-csshacks/tree/master/chrome/tabs_on_bottom.css made available under Mozilla Public License v. 2.0
See the above repository for updates as well as full license text. */


:root{ --uc-titlebar-padding: 0px; }
@media  (-moz-platform: windows),
        (-moz-platform: windows-win7),
        (-moz-platform: windows-win10){
  :root[sizemode="maximized"][tabsintitlebar]{
    --uc-titlebar-padding: 8px;
  }
}
#toolbar-menubar[autohide="true"] > .titlebar-buttonbox-container,
#TabsToolbar > .titlebar-buttonbox-container{
  position: fixed;
  display: block;
  top: 0;
  right:0;
  height: 40px;
}
/* Mac specific. You should set that font-smoothing pref to true if you are on any platform where window controls are on left */
@supports -moz-bool-pref("layout.css.osx-font-smoothing.enabled"){
  :root{ --uc-titlebar-padding: 0px !important }
  .titlebar-buttonbox-container{ left:0; right: unset !important; }
}

:root[uidensity="compact"] #TabsToolbar > .titlebar-buttonbox-container{ height: 32px }

#toolbar-menubar[inactive] > .titlebar-buttonbox-container{ opacity: 0 }

#navigator-toolbox{ padding-top: var(--uc-titlebar-padding,0px) !important; }

.titlebar-buttonbox-container > .titlebar-buttonbox{ height: 100%; }

#titlebar{
  -moz-box-ordinal-group: 2;
  -moz-appearance: none !important;
  --tabs-navbar-shadow-size: 0px;
}
/* Re-order window and tab notification boxes */
#navigator-toolbox > div{ display: contents }
.global-notificationbox,
#tab-notification-deck{ -moz-box-ordinal-group: 2 }

#TabsToolbar .titlebar-spacer{ display: none; }
/* Also hide the toolbox bottom border which isn't at bottom with this setup */
#navigator-toolbox::after{ display: none !important; }

@media (-moz-gtk-csd-close-button){ .titlebar-button{ -moz-box-orient: vertical } }

/* At Activated Menubar */
:root:not([chromehidden~="menubar"], [sizemode="fullscreen"]) #toolbar-menubar:not([autohide="true"]) + #TabsToolbar > .titlebar-buttonbox-container {
  display: block !important;
}
#toolbar-menubar:not([autohide="true"]) > .titlebar-buttonbox-container {
  visibility: hidden;
}

/* These exist only for compatibility with autohide-tabstoolbar.css */
toolbox#navigator-toolbox > toolbar#nav-bar.browser-toolbar{ animation: none; }
#navigator-toolbox:hover #TabsToolbar{ animation: slidein ease-out 48ms 1 }
#TabsToolbar > .titlebar-buttonbox-container{ visibility: visible }
#navigator-toolbox:not(:-moz-lwtheme){ background-color: -moz-dialog }

/* Uncomment the following if you want bookmarks toolbar to be below tabs */
/*
#PersonalToolbar{ -moz-box-ordinal-group: 2 }
*/

/* Source file https://github.com/MrOtherGuy/firefox-csshacks/tree/master/chrome/window_control_placeholder_support.css made available under Mozilla Public License v. 2.0
See the above repository for updates as well as full license text. */

/* Creates placeholders for window controls */
/* This is a supporting file used by other stylesheets */

/* This stylesheet is pretty much unnecessary if window titlebar is enabled */

/* This file should preferably be imported before other stylesheets */

/* Defaults for window controls on RIGHT side of the window */
/* Modify these values to match your preferences */
:root:is([tabsintitlebar], [sizemode="fullscreen"]) {
    --uc-window-control-width: 138px; /* Space reserved for window controls (Win10) */
    /* Extra space reserved on both sides of the nav-bar to be able to drag the window */
    --uc-window-drag-space-pre: 30px; /* left side*/
    --uc-window-drag-space-post: 30px; /* right side*/
  }
  
  :root:is([tabsintitlebar][sizemode="maximized"], [sizemode="fullscreen"]) {
    --uc-window-drag-space-pre: 0px; /* Remove pre space */
  }
  
  @media  (-moz-platform: windows-win7),
          (-moz-platform: windows-win8),
          (-moz-os-version: windows-win7),
          (-moz-os-version: windows-win8){
    :root:is([tabsintitlebar], [sizemode="fullscreen"]) {
      --uc-window-control-width: 105px;
    }
  }
  
  @media (-moz-gtk-csd-available) {
    :root:is([tabsintitlebar],[sizemode="fullscreen"]) {
      --uc-window-control-width: 84px;
    }
  }
  
  /* macOS settings are further below */
  .titlebar-buttonbox, #window-controls{ color: var(--toolbar-color) }
  :root[sizemode="fullscreen"] .titlebar-buttonbox-container{ display: none }
  :root[sizemode="fullscreen"] #navigator-toolbox { position: relative; }
  
  :root[sizemode="fullscreen"] #TabsToolbar > .titlebar-buttonbox-container:last-child,
  :root[sizemode="fullscreen"] #window-controls{
    position: absolute;
    display: flex;
    top: 0;
    right:0;
    height: 40px;
    visibility: hidden !important;
  }
  
  :root[sizemode="fullscreen"] #TabsToolbar > .titlebar-buttonbox-container:last-child,
  :root[uidensity="compact"][sizemode="fullscreen"] #window-controls{ height: 32px }
  
  #nav-bar{
    border-inline: var(--uc-window-drag-space-pre,0px) solid var(--toolbar-bgcolor);
    border-inline-style: solid !important;
    border-right-width: calc(var(--uc-window-control-width,0px) + var(--uc-window-drag-space-post,0px));
  }
  
  /* Use this pref to check Mac OS where window controls are on left */
  /* This pref defaults to true on Mac and doesn't actually do anything on other platforms. So if your system has window controls on LEFT side you can set the pref to true */
  @supports -moz-bool-pref("layout.css.osx-font-smoothing.enabled"){
    :root:is([tabsintitlebar], [sizemode="fullscreen"]) {
      --uc-window-control-width: 72px;
    }
    :root[tabsintitlebar="true"]:not([inFullscreen]) #nav-bar{
      border-inline-width: calc(var(--uc-window-control-width,0px) + var(--uc-window-drag-space-post,0px)) var(--uc-window-drag-space-pre,0px)
    }
    :root[sizemode="fullscreen"] #TabsToolbar > .titlebar-buttonbox-container:last-child,
    :root[sizemode="fullscreen"] #window-controls{ right: unset }
    
    .titlebar-buttonbox-container{
      position: fixed;
      top: 10px !important;
    }
  }

  #navigator-toolbox{
    padding: 0 !important;
  }
  .titlebar-buttonbox-container{
    position: fixed;
    top: 0px;
  }


  #titlebar{
    height: 0px !important;
    min-height: 0px !important;
    max-height: 0px !important;
  }

  .private-browsing-indicator{
    display: none !important;
  }

 .tab-background, .tab-stack {
  min-height: unset !important;
 }

 #TabsToolbar-customization-target {
  width: -moz-available !important;
  min-width: -moz-available !important;;
  max-width: -moz-available !important;
  height: -moz-available !important;
  min-height: -moz-available !important;
  max-height: -moz-available !important;
 }

 #alltabs-button, #new-tab-button {
  display: none !important;
 }

 #tabs-newtab-button > .toolbarbutton-text {
  display: none ;
 }
 
 .tabbrowser-tab {
  width: -moz-available !important;
  min-width: -moz-available !important;
  max-width: -moz-available !important;
 }

 /************************************************************************ 垂直タブは上記で以上。************************************************************************/

  #toolbarItemClock > .toolbarbutton-text {
    display: block;
    font-size: 15px;
  }

  #toolbarItemClock > .toolbarbutton-icon {
    display: none;
    list-style-image: url("chrome://browser/skin/history.svg");
  }

  :root[customizing] #toolbarItemClock::after {
    content: "Clock";
    font-size: 10px;
    display: block !important;
  }

  #toolbarItemClock::after {
    display: none;
  }

  :root[customizing] #toolbarItemClock > .toolbarbutton-icon {
    display: block !important;
  }

  #sidebar-button2 {
    list-style-image: url("chrome://browser/skin/sidebars.svg");
    fill: rgb(0, 192, 209) !important;
  }

  #browser {
    background: -moz-Dialog !important;
  }
  
  .browser-sidebar2 {
    -moz-box-ordinal-group: 1 !important;
    background: var(--toolbar-bgcolor);
    border: var(--win-sidebar-bgcolor) 0.1px solid;
  } 

  #sidebar-box[positionend] + .sidebar-splitter {
    border-inline-width: unset !important;
    margin-inline: 0 auto !important;
  }

  #sidebar-select-box {
    background: var(--toolbar-bgcolor);
  }
  
  #sidebar-select-box {
    -moz-box-ordinal-group: 0 !important;
    scrollbar-width: thin;
  }

  /* default */
  .sidepanel-icon > .toolbarbutton-icon,
  .sidepanel-browser-icon > .toolbarbutton-icon {
    width: 16px !important;
  }

  .sidepanel-icon > .toolbarbutton-text,
  .sidepanel-browser-icon > .toolbarbutton-text {
    display: none !important;
  }
  
  #sidebar-select-box{
    width: 42px;
    max-width: 42px;
    min-width: 42px;
  }
  
  .sidepanel-icon, .sidepanel-browser-icon{
    appearance: none;
    -moz-context-properties: fill, fill-opacity;
    border-radius: 4px;
    color: inherit;
    fill: currentColor;
    margin: 1px 2px 5px 2px;
    padding: 10px;
    scale: 1.0;
  }

  /* uidensity: compact mode */
  :root[uidensity=compact] .sidepanel-icon, :root[uidensity=compact] .sidepanel-browser-icon {
      appearance: none;
      -moz-context-properties: fill, fill-opacity;
      border-radius: 4px;
      color: inherit;
      fill: currentColor;
      margin: 3.5px 3.5px 4.5px 3.5px;
      padding: 5px;
      scale: 1.0;
  }

  :root[uidensity=compact] #sidebar-select-box{
    width: 35px;
    max-width: 35px;
    min-width: 35px;
  }

  /* uidensity: touch mode */
  :root[uidensity=touch] .sidepanel-icon, :root[uidensity=touch] .sidepanel-browser-icon {
    appearance: none;
    -moz-context-properties: fill, fill-opacity;
    border-radius: 4px;
    color: inherit;
    fill: currentColor;
    margin: 1px 3px 2px 3px;
    padding: 16px;
    scale: 1.0;
  }

  
  :root[uidensity=touch] #sidebar-select-box{
    width: 60px;
    max-width: 60px;
    min-width: 60px;
  }

  :root[uidensity=touch] .sidepanel-icon > .toolbarbutton-icon,
  :root[uidensity=touch] .sidepanel-browser-icon > .toolbarbutton-icon {
    width: 20px !important;
  }

  #sidebar-select-box{
    border-left: 1px solid var(--chrome-content-separator-color);
    border-right: 1px solid var(--chrome-content-separator-color);
  }

  .sidebar2-icon {
    appearance: none;
    -moz-context-properties: fill, fill-opacity;
    border-radius: 4px;
    color: inherit;
    fill: currentColor;
    padding: 2px;
    width: 20px;
    height: auto;
  }
  
  @media not (prefers-contrast) {
    .sidepanel-icon:hover,.sidepanel-browser-icon:hover, .sidebar2-icon:hover {
      box-shadow: 0 0 4px rgba(0,0,0,.4) ;
      background-color: var(--tab-selected-bgcolor, var(--toolbar-bgcolor));
    }
    .sidepanel-icon[checked="true"]{
    background-color: color-mix(in srgb, currentColor 20%, transparent) ;
    box-shadow: 0 0 4px rgba(0,0,0,.4) ;
    }
    .sidepanel-icon:not([checked="true"]):active, .sidepanel-browser-icon:active, .sidebar2-icon:active {
      background-color: color-mix(in srgb, currentColor 20%, transparent);
      box-shadow: 0 0 4px rgba(0,0,0,.4);
    }
  }
  
  @media (prefers-contrast) {
    .sidebar2-icon:hover, .sidepanel-icon:hover, .sidepanel-browser-icon:hover, .sidebar2-icon:hover {
      outline: 1px solid currentColor;
    }
  }

  #sidebar2-back {
    list-style-image: url("chrome://browser/skin/back.svg");
  }
  
  #sidebar2-forward {
    list-style-image: url("chrome://browser/skin/forward.svg");
  }
  
  #sidebar2-reload {
    list-style-image: url("chrome://global/skin/icons/reload.svg");
  }
  
  #sidebar2-go-index {
    list-style-image: url("chrome://browser/skin/home.svg");
  }
  
  #sidebar2-keeppanelwidth {
      list-style-image: url("chrome://browser/skin/lepton/screenshot.svg");
  }
  
  #sidebar2-close {
    list-style-image: url("chrome://global/skin/icons/close.svg");
  }
  
  #sidebar2-mute {
    scale: 1.4;
    list-style-image: url("chrome://browser/skin/tabbrowser/tab-audio-playing-small.svg");
  }
  
  #sidebar2-mute[mute=true]{
    scale: 1.4;
    list-style-image: url("chrome://browser/skin/tabbrowser/tab-audio-muted-small.svg") !important;
  }
  
  [data-l10n-id="show-browser-manager-sidebar"] {
    --BMSIcon: url("chrome://browser/skin/lepton/toolbox.svg");
  }
  
  [data-l10n-id="show-bookmark-sidebar"]{
    --BMSIcon: url("chrome://browser/skin/bookmark.svg");
  }
  
  [data-l10n-id="show-history-sidebar"] {
    --BMSIcon: url("chrome://browser/skin/history.svg");
  }
  
  #select-syncedtab {
    --BMSIcon: url("chrome://browser/skin/tab.svg");
  }
  
  [data-l10n-id="show-download-sidebar"] {
    --BMSIcon: url("chrome://browser/skin/downloads/downloads.svg");
  }
  
  [data-l10n-id="show-TST-sidebar"] {
    --BMSIcon: url("chrome://browser/skin/TST-dark.svg");
  }

  [data-l10n-id="show-notes-sidebar"] {
    --BMSIcon: url("chrome://browser/skin/notes-bms.svg");
  }
  
  #select-CustomURL{
    list-style-image: url("chrome://global/skin/icons/defaultFavicon.svg");
  }
  
  #preferences-icon{
    list-style-image: url("chrome://browser/skin/settings.svg");
  }
  
  #passwords-icon{
    list-style-image: url("chrome://browser/skin/login.svg");
  }
  
  #addons-icon{
    list-style-image: url("chrome://mozapps/skin/extensions/extension.svg");
  }

  #add-button{
    list-style-image: url("chrome://browser/skin/floorplegacy/newtab.svg");
  }

  .sidepanel-icon{
    list-style-image: var(--BMSIcon,url("chrome://devtools/skin/images/globe.svg"));
  }
  
  :root[inDOMFullscreen] :is(#sidebar-select-box),
  :root[inFullscreen]:not([macOSNativeFullscreen]) :is(#sidebar-select-box) {
    display: none;
  }

  #bsb-context-add, #bsb-context-link-add {
    --menuitem-image: url("chrome://browser/skin/lepton/movetowindow-16.svg");
  }

  #undo-closed-tab {
    list-style-image: url("chrome://browser/skin/undo-closed-tab.svg");
  }
